@startuml
skinparam linetype ortho

entity "User" as user {
    *user_id : number 
}

entity "Device" as device {
    *device_id : number <<generated>>
    --
    *device_type_id : number <<FK>>
    *location_id : number <<FK>>
    *serial_number : number <<UK>>
    description : text
    created_datetime: datetime
    helthcheck_datetime: datetime
    helthcheck_status : bool
}

entity "DeviceType" as device_type {
    *device_type_id : number
    --
    *name : text
}

entity "Location" as location {
    *location_id : number <<generated>>
    __
    *house_id : number <<FK>>
    description: text
}

entity "House" as house {
    *house_id : number <<generated>>
    __
    *user_id : number <<FK>>
    address: text
    description: text
}

entity "Scenario" as scenario {
    *scenario_id : number <<generated>>
    __
    *house_id : number <<FK>>
    *scenario : text
    description: text
}

entity "DeviceCommandJournal" as device_command_journal {
    *device_command_journal : number <<generated>>
    --
    *device_id : number <<FK>>
    *command : json
    user_id : number <<FK>>
    scenario_id : number <<FK>>
    *created_datetime: timastamp
    execution_datetime: timastamp
    execution_status: json
}

device_type ||--o{ device
user ||--o{ house
house ||--o{ location
house ||--o{ scenario
location ||--o{ device
device ||--o{ device_command_journal
user ||--o{ device_command_journal
scenario ||--o{ device_command_journal

@enduml
